1ST STEP: LOGIN TO BASTION HOST
ssh root@${BASTION_HOST}

2ND STEP:RUN THE cpd_vars.sh file(it contains all the environment variables the etitlement key you will get https://pages.github.ibm.com/CESC-Infrastructure-Services/Installation-CP4D-WatsonX/#/requirements)
source cpd_vars.sh

3RD STEP:INSTALL PODMAN
sudo yum install -y podman

4TH STEP:DOWNLOAD CPD-CLI 
wget https://github.com/IBM/cpd-cli/releases/download/v13.1.5/cpd-cli-linux-EE-13.1.5.tgz
tar -xvf cpd-cli-linux-EE-13.1.5.tgz

echo "alias docker=podman" >> ~/.bashrc
source ~/.bashrc
docker login -u cp -p $IBM_ENTITLEMENT_KEY cp.icr.io

cpd-cli manage restart-container

5TH STEP:DOWNLOAD OC COMMAND LINE
wget --no-check-certificate https://downloads-openshift-console.apps.${OPENSHIFT_BASE_DOMAIN}/amd64/linux/oc.tar
tar -xvf oc.tar
chmod +x oc
sudo mv oc /usr/local/bin/oc

6TH STEP:RUN THE FOLLOWING COMMANDS FOR INSTALLATION
oc login ${OCP_URL} ${LOGIN_ARGUMENTS}
cpd-cli manage login-to-ocp \
--username=${OCP_USERNAME} \
--password=${OCP_PASSWORD} \
--server=${OCP_URL}
cpd-cli manage add-icr-cred-to-global-pull-secret --entitled_registry_key=${IBM_ENTITLEMENT_KEY} 

cpd-cli manage apply-cluster-components \
--release=${VERSION} \
--license_acceptance=true \
--cert_manager_ns=${PROJECT_CERT_MANAGER} \
--licensing_ns=${PROJECT_LICENSE_SERVICE}

cpd-cli manage apply-scheduler \
--release=${VERSION} \
--license_acceptance=true \
--scheduler_ns=${PROJECT_SCHEDULING_SERVICE}

cpd-cli manage apply-olm \
--release=${VERSION} \
--cpd_operator_ns=${PROJECT_CPD_INST_OPERATORS} \
--components=cpd_platform

cpd-cli manage apply-cr \
--release=${VERSION} \
--cpd_instance_ns=${PROJECT_CPD_INST_OPERANDS} \
--components=${COMPONENTS} \
--block_storage_class=${STG_CLASS_BLOCK} \
--file_storage_class=${STG_CLASS_FILE} \
--license_acceptance=true

cpd-cli manage get-cr-status \
--cpd_instance_ns=${PROJECT_CPD_INST_OPERANDS}







